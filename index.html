<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://the.missing.style/v1.0.3/missing.min.css">
    <script src="https://unpkg.com/htmx.org@1.8.4"
        integrity="sha384-wg5Y/JwF7VxGk4zLsJEcAojRtlVp1FKKdGy1qN+OMtdq72WRvX/EdRdqg/LOhYeV"
        crossorigin="anonymous"></script>

<body>
    <header>
        <h1>OPA Explorer<v-h>:</v-h><sub-title>Inspect compiler stages</sub-title></h1>
        <nav>
            <p class="tool-bar">
                <img src="https://openpolicyagent.org/badge/v0.48.0" />
                <a href="https://github.com/srenatus/opa-explorer">GitHub</a>
            </p>
        </nav>
    </header>
    <main class="crowded">
        <form>
            <div class="f-row">
                <textarea name="code" style="height: 300px" hx-post="/?tmpl=output" hx-target="#output"
                    hx-trigger="keyup changed delay:200ms" class="flex-grow:1 monospace">{{ .Code }}</textarea>
            </div>
        </form>
        <section id="output">
            {{ block "output" . }}
            {{ range .Result }}
            <details {{ if .Show }}open{{ end }}>
                <summary class={{ .Class }}>{{ .Stage }}</summary>
                <pre><code>{{ .Output }}</code></pre>
            </details>
            {{ end }}
            {{ end }}
        </section>
    </main>
</body>

</html>